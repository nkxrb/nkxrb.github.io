import{_ as i,c as a,o as n,ai as h}from"./chunks/framework.CJxjxFyh.js";const p=JSON.parse('{"title":"","description":"","frontmatter":{"highlight":"ocean"},"headers":[],"relativePath":"mini-vue/v0_0_5.md","filePath":"mini-vue/v0_0_5.md","lastUpdated":1645753949000}'),l={name:"mini-vue/v0_0_5.md"};function t(e,s,E,r,d,g){return n(),a("div",null,s[0]||(s[0]=[h(`<h3 id="v0-0-5-\u603B\u7ED3\u4E00\u6CE2\u3002\u5B8C\u5584\u529F\u80FD-\u4F18\u5316\u4EE3\u7801\u903B\u8F91-\u4FEE\u590Dbug" tabindex="-1">v0.0.5 \u603B\u7ED3\u4E00\u6CE2\u3002\u5B8C\u5584\u529F\u80FD\uFF0C\u4F18\u5316\u4EE3\u7801\u903B\u8F91\uFF0C\u4FEE\u590Dbug <a class="header-anchor" href="#v0-0-5-\u603B\u7ED3\u4E00\u6CE2\u3002\u5B8C\u5584\u529F\u80FD-\u4F18\u5316\u4EE3\u7801\u903B\u8F91-\u4FEE\u590Dbug" aria-label="Permalink to &quot;v0.0.5 \u603B\u7ED3\u4E00\u6CE2\u3002\u5B8C\u5584\u529F\u80FD\uFF0C\u4F18\u5316\u4EE3\u7801\u903B\u8F91\uFF0C\u4FEE\u590Dbug&quot;">\u200B</a></h3><p>\u529F\u80FD\u70B9\uFF1A</p><ul><li>\u5F53v-for\u5B58\u5728\u540C\u7EA7\u5B50\u8282\u70B9\u65F6\uFF0Cpatch\u51FD\u6570\u65E0\u6CD5\u6B63\u5E38\u5DE5\u4F5C</li><li>\u5B8C\u5584\u751F\u547D\u5468\u671F\u94A9\u5B50\u51FD\u6570\u529F\u80FD</li><li>v-model \u6307\u4EE4\u4F1A\u8F6C\u6362\u4E3Aprops[value]\u548C@input\u4E8B\u4EF6</li><li>\u652F\u6301\u6570\u7EC4\u7C7B\u578B\u54CD\u5E94</li></ul><h3 id="\u5F53v-for\u5B58\u5728\u540C\u7EA7\u5B50\u8282\u70B9\u65F6-patch\u51FD\u6570\u65E0\u6CD5\u6B63\u5E38\u5DE5\u4F5C" tabindex="-1">\u5F53v-for\u5B58\u5728\u540C\u7EA7\u5B50\u8282\u70B9\u65F6\uFF0Cpatch\u51FD\u6570\u65E0\u6CD5\u6B63\u5E38\u5DE5\u4F5C <a class="header-anchor" href="#\u5F53v-for\u5B58\u5728\u540C\u7EA7\u5B50\u8282\u70B9\u65F6-patch\u51FD\u6570\u65E0\u6CD5\u6B63\u5E38\u5DE5\u4F5C" aria-label="Permalink to &quot;\u5F53v-for\u5B58\u5728\u540C\u7EA7\u5B50\u8282\u70B9\u65F6\uFF0Cpatch\u51FD\u6570\u65E0\u6CD5\u6B63\u5E38\u5DE5\u4F5C&quot;">\u200B</a></h3><p>\u4FEE\u6539render.js\u4E2D\u7684createElement</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ...</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // \u5728\u89E3\u6790\u5B50\u8282\u70B9\u65F6\uFF0C\u589E\u52A0isArray\u5224\u65AD\uFF0C\u7136\u540E\u5408\u5E76\u6570\u7EC4</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  children.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">child</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> child </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;string&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      arr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ vm, tag: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;text&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, text: child })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Array.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isArray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(child)) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      arr.push.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(arr, child) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// \u5229\u7528apply\u7684\u6570\u7EC4\u53C2\u6570\u5C06\u4E24\u4E2A\u6570\u7EC4\u5408\u5E76</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      arr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(child)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ...</span></span></code></pre></div><h3 id="\u5B8C\u5584\u751F\u547D\u5468\u671F\u94A9\u5B50\u51FD\u6570\u529F\u80FD" tabindex="-1">\u5B8C\u5584\u751F\u547D\u5468\u671F\u94A9\u5B50\u51FD\u6570\u529F\u80FD <a class="header-anchor" href="#\u5B8C\u5584\u751F\u547D\u5468\u671F\u94A9\u5B50\u51FD\u6570\u529F\u80FD" aria-label="Permalink to &quot;\u5B8C\u5584\u751F\u547D\u5468\u671F\u94A9\u5B50\u51FD\u6570\u529F\u80FD&quot;">\u200B</a></h3><ol><li>beforeCreate \u6B64\u65F6\u4EC5\u521D\u59CB\u5316\u4E86\u4E0A\u4E0B\u6587\u751F\u547D\u5468\u671F\uFF0C\u4E8B\u4EF6\uFF0C\u6E32\u67D3\u51FD\u6570\uFF0Cvue\u7EC4\u4EF6\u4E2D\u7684\u5C5E\u6027\u8FD8\u65E0\u6CD5\u901A\u8FC7this\u76F4\u63A5\u8FDB\u884C\u8BBF\u95EE\uFF0C\u53EA\u80FD\u901A\u8FC7this.$options\u8BBF\u95EE</li></ol><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">initLifecycle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vm)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">initEvents</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vm)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">initRender</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vm)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">callHook</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vm, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;beforeCreate&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><ol start="2"><li>created \u521D\u59CB\u5316injections\u3001state\u3001provide\uFF0C\u6B64\u65F6vue\u7EC4\u4EF6\u7684\u76F8\u5173\u6570\u636E\u5DF2\u7ECF\u5904\u7406\u5B8C\u6BD5\uFF0C\u53EF\u76F4\u63A5\u901A\u8FC7this\u83B7\u53D6prop,methods,data\uFF0C\u6CE8\u610F\uFF0C\u6B64\u65F6\u771F\u5B9EDOM\u8FD8\u672A\u6302\u8F7D</li></ol><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">initInjections</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vm) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// resolve injections before data/props</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">initState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vm)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">initProvide</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vm) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// resolve provide after data/props</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">callHook</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vm, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;created&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> initState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">vm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  vm._watchers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> []</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> opts</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> vm.$options</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  opts.props </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> initProps</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vm, opts.props)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  opts.methods </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> initMethods</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vm, opts.methods)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  opts.data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> initData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vm) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> observe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vm._data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> /* asRootData */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  opts.computed </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> initComputed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vm, opts.computed)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  opts.watch </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> opts.watch </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> nativeWatch </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> initWatch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vm, opts.watch)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ol start="3"><li><p>beforeMount \u5728mountComponent\u51FD\u6570\u4E2D\u89E6\u53D1\uFF0C\u7EC4\u4EF6\u6302\u8F7D\u524D\uFF0Crender\u51FD\u6570\u6267\u884C\u524D</p></li><li><p>mounted \u5728mountComponent\u51FD\u6570\u4E2D\u89E6\u53D1\uFF0C\u7EC4\u4EF6\u6302\u8F7D\u540E\uFF0Crender\u51FD\u6570\u6267\u884C\u540E\uFF0C\u7531\u4E8E\u5FAE\u4EFB\u52A1\u7684\u6267\u884C\u987A\u5E8F\u5F71\u54CD\uFF0C\u5728\u6B64\u5904\u6709\u65F6\u65E0\u6CD5\u76F4\u63A5\u83B7\u53D6\u5230el,\u56E0\u6B64\u9700\u8981\u501F\u52A9$nextTick\u3002</p></li><li><p>beforeUpdate \u5728\u6BCF\u4E2A\u6E32\u67D3Watcher\uFF08isRenderWatcher===true\uFF09\u7684before\u94A9\u5B50\u51FD\u6570\u4E2D\uFF0C\u5F53\u6BCF\u4E2A\u7EC4\u4EF6\u6267\u884C\u6E32\u67D3\u66F4\u65B0\u524D\u89E6\u53D1</p></li></ol><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Watcher</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vm, updateComponent, noop, {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  before</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> before</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (vm._isMounted </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">vm._isDestroyed) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      callHook</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vm, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;beforeUpdate&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> /* isRenderWatcher */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><ol start="6"><li>updated \u5728scheduler.js\u4E2D\uFF0C\u6BCF\u4E00\u8F6E\u76D1\u542C\u54CD\u5E94\u53D8\u5316\uFF0CnextTick\u65F6\uFF0C\u5237\u65B0\u76D1\u542C\u961F\u5217\u4E2D\u7684\u6BCF\u4E2A\u76D1\u542C\u5668\uFF0C\u904D\u5386\u6BCF\u4E2Avm\u7684\u6E32\u67D3Watcher</li></ol><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> callUpdatedHooks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">queue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> queue.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> watcher </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> queue[i];</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> vm </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> watcher.vm;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (vm._watcher </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> watcher </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> vm._isMounted </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">vm._isDestroyed) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      callHook</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vm, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;updated&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ol start="7"><li>beforeDestroy \u7EC4\u4EF6\u9500\u6BC1\u4E4B\u524D\u89E6\u53D1</li></ol><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Vue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$destroy</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  ...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  callHook</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vm, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;beforeDestroy&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ol start="8"><li>destroyed \u7EC4\u4EF6\u9500\u6BC1\u540E\u89E6\u53D1</li></ol><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Vue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$destroy</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  ...</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> vm</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  vm.$parent.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">remove</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vm)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  vm._watcher </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> vm._watcher.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">teardown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> vm._watchers.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    vm._watchers[i].</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">teardown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (vm._data.__ob__) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    vm._data.__ob__.vmCount</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  vm._isDestroyed </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  vm.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">__patch__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vm._vnode, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  callHook</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vm, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;destroyed&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ol start="9"><li><p>activated (\u4F7F\u7528keep-alive\u65F6\u6709\u7528) \u91CD\u65B0\u6FC0\u6D3B\u65F6</p></li><li><p>deactivated (\u4F7F\u7528keep-alive\u65F6\u6709\u7528) \u89E3\u9664\u6FC0\u6D3B\u72B6\u6001</p></li></ol><h3 id="v-model-\u6307\u4EE4\u4F1A\u8F6C\u6362\u4E3Aprops-value-\u548C-input\u4E8B\u4EF6" tabindex="-1">v-model \u6307\u4EE4\u4F1A\u8F6C\u6362\u4E3Aprops[value]\u548C@input\u4E8B\u4EF6 <a class="header-anchor" href="#v-model-\u6307\u4EE4\u4F1A\u8F6C\u6362\u4E3Aprops-value-\u548C-input\u4E8B\u4EF6" aria-label="Permalink to &quot;v-model \u6307\u4EE4\u4F1A\u8F6C\u6362\u4E3Aprops[value]\u548C@input\u4E8B\u4EF6&quot;">\u200B</a></h3><p>\u4E0B\u9762\u662F\u7ECF\u8FC7\u6A21\u677F\u7F16\u8BD1\u7684\u865A\u62DFvnode\u914D\u7F6E\u6570\u636E</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{ </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  directives</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;model&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      rawName: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;v-model&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      value: (_vm.todo),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      expression: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;todo&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }],</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  domProps</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &quot;value&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (_vm.todo)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &quot;input&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">$event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">          if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ($event.target.composing) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">              return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          // \u901A\u8FC7\u76D1\u542Cinput\u4E8B\u4EF6\uFF0C\u5C06target.value\u8D4B\u503C\u7ED9_vm.todo</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          _vm.todo </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $event.target.value</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="\u652F\u6301\u6570\u7EC4\u7C7B\u578B\u54CD\u5E94" tabindex="-1">\u652F\u6301\u6570\u7EC4\u7C7B\u578B\u54CD\u5E94 <a class="header-anchor" href="#\u652F\u6301\u6570\u7EC4\u7C7B\u578B\u54CD\u5E94" aria-label="Permalink to &quot;\u652F\u6301\u6570\u7EC4\u7C7B\u578B\u54CD\u5E94&quot;">\u200B</a></h3><p>\u6211\u4EEC\u4E4B\u524D\u90FD\u662F\u901A\u8FC7this.countList = [...this.countList, this.count], \u8FD9\u79CD\u91CD\u65B0\u8D4B\u503C\u7684\u65B9\u5F0F\u6765\u6539\u5199\u6570\u7EC4\u7684\uFF0C\u8FD9\u6837\u5199\u662F\u4E3A\u4E86\u89E6\u53D1data\u7684\u54CD\u5E94\uFF0C\u8FD9\u6837\u5199\u5F0A\u7AEF\u4E5F\u5F88\u660E\u663E\uFF0C\u56E0\u6B64\u6211\u4EEC\u9700\u8981\u66F4\u7EC6\u7C92\u5EA6\u7684\u63A7\u5236\u6570\u7EC4\u7684\u54CD\u5E94\u3002</p><p>\u7531\u4E8EObject.defineProperty\u65E0\u6CD5\u652F\u6301\u672A\u5B9A\u4E49\u7684\u5C5E\u6027\uFF0C\u6570\u7EC4\u7684\u7D22\u5F15\u4E5F\u662F\u4E00\u6837\u7684\u903B\u8F91 \u56E0\u6B64\u6211\u4EEC\u9700\u8981\u91CD\u5199\u6570\u7EC4\u7684push,slice\u7B49\u65B9\u6CD5\uFF0C\u6765\u589E\u52A0\u6216\u79FB\u9664\u5BF9\u5E94\u5C5E\u6027\u7684\u54CD\u5E94\u3002</p>`,26)]))}const k=i(l,[["render",t]]);export{p as __pageData,k as default};
